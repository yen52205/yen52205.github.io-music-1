<!DOCTYPE html>
<html>
          <head>
	<script type="text/javascript" src="test.js"></script>
	<script
	  type="text/javascript"
	  src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js">
	</script>
	<script type="text/javascript">
	  (function () {
		emailjs.init('5zUHPTFpXOmSM2Eww');
	  })();
	</script>
                     <meta charset="utf-8">
                          <title>情緒符號生成音樂主觀評比問卷</title>
		     <style>
			.left {
			  border: 1px outset red;
			  text-align: center;
			  margin-top: 10px;
			  display: inline-block;
			  width:600px;
			  height:550px;
			  vertical-align: top;
			}
			.right{
			  border: 1px outset red;
			  text-align: center;
			  margin-top: 10px;
		      margin-left: 70px;
			  display: inline-block;
			  width:600px;
			  height:550px;
			  vertical-align: top;
			     }
		    .top{
			  text-align: center;
			  margin-top: 5px;
			  width: 1270px;
			  vertical-align:top;
			}
		    .top2{
			  text-align: center;
			  margin-top: 10px;
			  width: 1270px;
			  vertical-align:top;
			}
			.question{
			  text-align: center;
			  width: 230px;
			  margin-top: 5px;
			  margin-left: 5px;
			  display: inline-block;
			  vertical-align: top;
			}
		     </style>
		  
                            </head>
                              <body>
				<tbody>
				<div class="top">
				<h3>情緒符號音樂生成主觀評比問卷</h3>
				</div>
				<div class="left">
				<h4>您好，感謝在百忙之中撥冗參加測試。</h4>
				<h5>每頁測試會出現五首鋼琴音樂，請在確實聽完每首音樂後，並完成下方問題。</h5><br>
				<h5>Arousal:情緒激動程度(1是最低，5是最高)</h5><br>
				<h5>Valence:情緒正負面(1是越負面，5是越正面)</h5><br>
				<h5>Humanness:音樂是否像人演奏的(1是越不像，5是越像)</h5><br>
				<h5>Richness:音樂內容有趣程度(1是越無趣，5是越有趣)</h5><br>	
				<h5>Overall Music Quality:整體而言的音樂品質(1是越差，5是越佳)</h5><br>
				</div>
				<div class="right" >
                		<h4>valence-arousal參考圖:</h4><br>
				<img style='height: 80%; width: 80%; object-fit: contain' src="https://github.com/yen52205/yen52205.github.io-music-1/blob/master/.assets/4Q.png?raw=true" alt="Valence-Arousal">				
				</div>
				
			
            <div>		
            <form>
			<div class="top2">
			<fieldset id="sample1">
			<legend>Sample-1</legend>
            <div class="top">			
			<h3><audio preload="auto" id="audio-1" src="https://raw.githubusercontent.com/yen52205/music_content/master/pretrained_transformer_renamed/emo_1_song_219.mp3" controls></audio>	</h3> 	
			</div><div class="question"><fieldset id="arousal1">
			<legend>Arousal</legend>
			<label><input type="radio" value=1 name="arousal-1">1</label>
			<label><input type="radio" value=2 name="arousal-1">2</label>
			<label><input type="radio" value=3 name="arousal-1">3</label>
			<label><input type="radio" value=4 name="arousal-1">4</label>
			<label><input type="radio" value=5 name="arousal-1">5</label>
			</fieldset></div>
			<div class="question"><fieldset id="valence1">
			<legend>Valence</legend>
			<label><input type="radio" value=1 name="valence-1">1</label>
			<label><input type="radio" value=2 name="valence-1">2</label>
			<label><input type="radio" value=3 name="valence-1">3</label>
			<label><input type="radio" value=4 name="valence-1">4</label>
			<label><input type="radio" value=5 name="valence-1">5</label>
			</fieldset></div>			
			<div class="question"><fieldset id="humanness1">
			<legend>Humanness</legend>
			<label><input type="radio" value=1 name="humanness-1">1</label>
			<label><input type="radio" value=2 name="humanness-1">2</label>
			<label><input type="radio" value=3 name="humanness-1">3</label>
			<label><input type="radio" value=4 name="humanness-1">4</label>
			<label><input type="radio" value=5 name="humanness-1">5</label>
			</fieldset></div>
			<div class="question"><fieldset id="richness1">
			<legend>Richness</legend>
			<label><input type="radio" value=1 name="richness-1">1</label>
			<label><input type="radio" value=2 name="richness-1">2</label>
			<label><input type="radio" value=3 name="richness-1">3</label>
			<label><input type="radio" value=4 name="richness-1">4</label>
			<label><input type="radio" value=5 name="richness-1">5</label>
			</fieldset></div>			
			<div class="question"><fieldset id="overall1">
			<legend>Overall Music Quality</legend>
			<label><input type="radio" value=1 name="overall-1">1</label>
			<label><input type="radio" value=2 name="overall-1">2</label>
			<label><input type="radio" value=3 name="overall-1">3</label>
			<label><input type="radio" value=4 name="overall-1">4</label>
			<label><input type="radio" value=5 name="overall-1">5</label>
			</fieldset></div></fieldset></div><br>		
		
		    <div class="top2">
			<fieldset id="sample2">
			<legend>Sample-2</legend>
		    <div class="top">
			<h3><audio preload="auto" id="audio-2" src="https://raw.githubusercontent.com/yen52205/music_content/master/0925_generated_songs_1200-2/emo_1_song_219.mp3" controls></audio></h3>
			</div><div class="question"><fieldset id="arousal-2">
			<legend>Arousal</legend>
			<label><input type="radio" value=1 name="arousal-2">1</label>
			<label><input type="radio" value=2 name="arousal-2">2</label>
			<label><input type="radio" value=3 name="arousal-2">3</label>
			<label><input type="radio" value=4 name="arousal-2">4</label>
			<label><input type="radio" value=5 name="arousal-2">5</label>
			</fieldset></div>		
			<div class="question"><fieldset id="valence-2">
			<legend>Valence</legend>
			<label><input type="radio" value=1 name="valence-2">1</label>
			<label><input type="radio" value=2 name="valence-2">2</label>
			<label><input type="radio" value=3 name="valence-2">3</label>
			<label><input type="radio" value=4 name="valence-2">4</label>
			<label><input type="radio" value=5 name="valence-2">5</label>
			</fieldset></div>			
			<div class="question"><fieldset id="humanness-2">
			<legend>Humanness</legend>
			<label><input type="radio" value=1 name="humanness-2">1</label>
			<label><input type="radio" value=2 name="humanness-2">2</label>
			<label><input type="radio" value=3 name="humanness-2">3</label>
			<label><input type="radio" value=4 name="humanness-2">4</label>
			<label><input type="radio" value=5 name="humanness-2">5</label>
			</fieldset></div>
			<div class="question"><fieldset id="richness-2">
			<legend>Richness</legend>
			<label><input type="radio" value=1 name="richness-2">1</label>
			<label><input type="radio" value=2 name="richness-2">2</label>
			<label><input type="radio" value=3 name="richness-2">3</label>
			<label><input type="radio" value=4 name="richness-2">4</label>
			<label><input type="radio" value=5 name="richness-2">5</label>
			</fieldset></div>			
			<div class="question"><fieldset id="overall-2">
			<legend>Overall Music Quality</legend>
			<label><input type="radio" value=1 name="overall-2">1</label>
			<label><input type="radio" value=2 name="overall-2">2</label>
			<label><input type="radio" value=3 name="overall-2">3</label>
			<label><input type="radio" value=4 name="overall-2">4</label>
			<label><input type="radio" value=5 name="overall-2">5</label>
			</fieldset></div></fieldset></div><br>

            <div class="top2">
			<fieldset id="sample3">
			<legend>Sample-3</legend>
            <div class="top">
			<h3><audio preload="auto" id="audio-3" src="https://raw.githubusercontent.com/yen52205/music_content/master/model_8_renamed/emo_1_song_219.mp3" controls></audio></h3> 
			</div><div class="question"><fieldset id="arousal-3">
			<legend>Arousal</legend>
			<label><input type="radio" value=1 name="arousal-3">1</label>
			<label><input type="radio" value=2 name="arousal-3">2</label>
			<label><input type="radio" value=3 name="arousal-3">3</label>
			<label><input type="radio" value=4 name="arousal-3">4</label>
			<label><input type="radio" value=5 name="arousal-3">5</label>
			</fieldset></div>			
			<div class="question"><fieldset id="valence-3">
			<legend>Valence</legend>
			<label><input type="radio" value=1 name="valence-3">1</label>
			<label><input type="radio" value=2 name="valence-3">2</label>
			<label><input type="radio" value=3 name="valence-3">3</label>
			<label><input type="radio" value=4 name="valence-3">4</label>
			<label><input type="radio" value=5 name="valence-3">5</label>
			</fieldset></div>			
			<div class="question"><fieldset id="humanness-3">
			<legend>Humanness</legend>
			<label><input type="radio" value=1 name="humanness-3">1</label>
			<label><input type="radio" value=2 name="humanness-3">2</label>
			<label><input type="radio" value=3 name="humanness-3">3</label>
			<label><input type="radio" value=4 name="humanness-3">4</label>
			<label><input type="radio" value=5 name="humanness-3">5</label>
			</fieldset></div>
			<div class="question"><fieldset id="richness-3">
			<legend>Richness</legend>
			<label><input type="radio" value=1 name="richness-3">1</label>
			<label><input type="radio" value=2 name="richness-3">2</label>
			<label><input type="radio" value=3 name="richness-3">3</label>
			<label><input type="radio" value=4 name="richness-3">4</label>
			<label><input type="radio" value=5 name="richness-3">5</label>
			</fieldset></div>			
			<div class="question"><fieldset id="overall-3">
			<legend>Overall Music Quality</legend>
			<label><input type="radio" value=1 name="overall-3">1</label>
			<label><input type="radio" value=2 name="overall-3">2</label>
			<label><input type="radio" value=3 name="overall-3">3</label>
			<label><input type="radio" value=4 name="overall-3">4</label>
			<label><input type="radio" value=5 name="overall-3">5</label>
			</fieldset></div></fieldset></div><br>			

            <div class="top2">
			<fieldset id="sample4">
			<legend>Sample-4</legend>
            <div class="top">
			<h3><audio preload="auto" id="audio-4" src="https://raw.githubusercontent.com/yen52205/music_content/master/model_3_renamed/emo_1_song_219.mp3" controls></audio></h3> 
			</div><div class="question"><fieldset id="arousal-4">
			<legend>Arousal</legend>
			<label><input type="radio" value=1 name="arousal-4">1</label>
			<label><input type="radio" value=2 name="arousal-4">2</label>
			<label><input type="radio" value=3 name="arousal-4">3</label>
			<label><input type="radio" value=4 name="arousal-4">4</label>
			<label><input type="radio" value=5 name="arousal-4">5</label>
			</fieldset></div>			
			<div class="question"><fieldset id="valence-4">
			<legend>Valence</legend>
			<label><input type="radio" value=1 name="valence-4">1</label>
			<label><input type="radio" value=2 name="valence-4">2</label>
			<label><input type="radio" value=3 name="valence-4">3</label>
			<label><input type="radio" value=4 name="valence-4">4</label>
			<label><input type="radio" value=5 name="valence-4">5</label>
			</fieldset></div>			
			<div class="question"><fieldset id="humanness-4">
			<legend>Humanness</legend>
			<label><input type="radio" value=1 name="humanness-4">1</label>
			<label><input type="radio" value=2 name="humanness-4">2</label>
			<label><input type="radio" value=3 name="humanness-4">3</label>
			<label><input type="radio" value=4 name="humanness-4">4</label>
			<label><input type="radio" value=5 name="humanness-4">5</label>
			</fieldset></div>
			<div class="question"><fieldset id="richness-4">
			<legend>Richness</legend>
			<label><input type="radio" value=1 name="richness-4">1</label>
			<label><input type="radio" value=2 name="richness-4">2</label>
			<label><input type="radio" value=3 name="richness-4">3</label>
			<label><input type="radio" value=4 name="richness-4">4</label>
			<label><input type="radio" value=5 name="richness-4">5</label>
			</fieldset></div>			
			<div class="question"><fieldset id="overall-4">
			<legend>Overall Music Quality</legend>
			<label><input type="radio" value=1 name="overall-4">1</label>
			<label><input type="radio" value=2 name="overall-4">2</label>
			<label><input type="radio" value=3 name="overall-4">3</label>
			<label><input type="radio" value=4 name="overall-4">4</label>
			<label><input type="radio" value=5 name="overall-4">5</label>
			</fieldset></div></fieldset></div><br>

            <div class="top2">
			<fieldset id="sample5">
			<legend>Sample-5</legend>
            <div class="top">
			<h3><audio preload="auto" id="audio-5" src="https://raw.githubusercontent.com/yen52205/music_content/master/model_25_renamed/emo_1_song_219.mp3" controls></audio></h3> 
			</div><div class="question"><fieldset id="arousal-5">
			<legend>Arousal</legend>
			<label><input type="radio" value=1 name="arousal-5">1</label>
			<label><input type="radio" value=2 name="arousal-5">2</label>
			<label><input type="radio" value=3 name="arousal-5">3</label>
			<label><input type="radio" value=4 name="arousal-5">4</label>
			<label><input type="radio" value=5 name="arousal-5">5</label>
			</fieldset></div>			
			<div class="question"><fieldset id="valence-5">
			<legend>Valence</legend>
			<label><input type="radio" value=1 name="valence-5">1</label>
			<label><input type="radio" value=2 name="valence-5">2</label>
			<label><input type="radio" value=3 name="valence-5">3</label>
			<label><input type="radio" value=4 name="valence-5">4</label>
			<label><input type="radio" value=5 name="valence-5">5</label>
			</fieldset></div>			
			<div class="question"><fieldset id="humanness-5">
			<legend>Humanness</legend>
			<label><input type="radio" value=1 name="humanness-5">1</label>
			<label><input type="radio" value=2 name="humanness-5">2</label>
			<label><input type="radio" value=3 name="humanness-5">3</label>
			<label><input type="radio" value=4 name="humanness-5">4</label>
			<label><input type="radio" value=5 name="humanness-5">5</label>
			</fieldset></div>
			<div class="question"><fieldset id="richness-5">
			<legend>Richness</legend>
			<label><input type="radio" value=1 name="richness-5">1</label>
			<label><input type="radio" value=2 name="richness-5">2</label>
			<label><input type="radio" value=3 name="richness-5">3</label>
			<label><input type="radio" value=4 name="richness-5">4</label>
			<label><input type="radio" value=5 name="richness-5">5</label>
			</fieldset></div>			
			<div class="question"><fieldset id="overall-5">
			<legend>Overall Music Quality</legend>
			<label><input type="radio" value=1 name="overall-5">1</label>
			<label><input type="radio" value=2 name="overall-5">2</label>
			<label><input type="radio" value=3 name="overall-5">3</label>
			<label><input type="radio" value=4 name="overall-5">4</label>
			<label><input type="radio" value=5 name="overall-5">5</label>
			</fieldset></div></fieldset></div><br>			

            <div class="top">
            <input width=200 height=100 type="button" id="send" onclick=updateAudio() value="下一組">		
            </div>			
            <button onclick="display(1)">1</button>
			
			<p id="store_content1">show store content here.</p>
			
	        </div>
</body>
            <script>
			const model_folder = ["https://raw.githubusercontent.com/yen52205/music_content/master/pretrained_transformer_renamed/",
			                      "https://raw.githubusercontent.com/yen52205/music_content/master/0925_generated_songs_1200-2/",
								  "https://raw.githubusercontent.com/yen52205/music_content/master/model_8_renamed/",
								  "https://raw.githubusercontent.com/yen52205/music_content/master/model_3_renamed/",
								  "https://raw.githubusercontent.com/yen52205/music_content/master/model_25_renamed/"];
								  
			const random_song_idx = [];
			for (let i=0;i<12;i++){
			     random_idx = Math.floor(Math.random() * 1000) + 1;
				 if (random_song_idx.includes(random_idx)==true){
				     continue;
				 }
				 else{
				   random_song_idx.push(random_idx);
				 }
			}
			
			const audio_order = [];
			for (let i=0; i<5;i++){
			    model_idx = Math.floor(Math.random()*5);
				if (audio_order.includes(model_idx)==true){
						continue;
				}
				else{
				   audio_order.push(model_idx);
				}
			}
			
			const audio_name = [];
			var emo = 0;
			for (let i=0;i<12;i++){
			   emo = (random_song_idx[i]+1)%4+1;
			   audio_name.push('emo_'+emo+'_song_'+random_song_idx[i]+'.mp3');
			}
			
			var page_idx = 0;
			var audio_1 = model_folder[0]+audio_name[page_idx];
			var audio_2 = model_folder[1]+audio_name[page_idx];
			var audio_3 = model_folder[2]+audio_name[page_idx];
			var audio_4 = model_folder[3]+audio_name[page_idx];
			var audio_5 = model_folder[4]+audio_name[page_idx];
			
			document.getElementById("audio-1").src = audio_1;
			document.getElementById("audio-2").src = audio_2;
			document.getElementById("audio-3").src = audio_3;			
			document.getElementById("audio-4").src = audio_4;
			document.getElementById("audio-5").src = audio_5;
			
			var userName = "default";
			var answer_str= "";
			
			function storeContent(){
			  answer_str = userName + "," + "audioName,arousal,valence,humanness,richness,overall,";
			  var audio_files = [audio_1,audio_2,audio_3,audio_4,audio_5];
			  for (let i=1; i<6;i++){ 
				  var audio_path = audio_files[i-1];
				  var aa = "arousal-"+i;
				  var vv = "valence-"+i;
				  var hh = "humanness-"+i;
				  var rr = "richness-"+i;
				  var oo = "overall-"+i;
				  document.getElementById("store_content1").innerHTML = aa;
				  var a = document.querySelector('input[name=${aa}]:checked').value;
				  var v = document.querySelector('input[name=${vv}]:checked').value;
                  var h = document.querySelector('input[name=${hh}]:checked').value;
                  var r = document.querySelector('input[name=${rr}]:checked').value;	
                  var o = document.querySelector('input[name=${oo}]:checked').value;	
                  answer_str += '${audio_path},${a},${v},${h},${r},${o},' ;				  
			  }
			}
			
			function updateAudio(){
			    if (page_idx<11){
					alert('更換mp3，原本='+ audio_name[page_idx]+' page_idx = '+page_idx);
				    page_idx += 1;
			        audio_1 = model_folder[0]+audio_name[page_idx];
			        audio_2 = model_folder[1]+audio_name[page_idx];
			        audio_3 = model_folder[2]+audio_name[page_idx];
			        audio_4 = model_folder[3]+audio_name[page_idx];
			        audio_5 = model_folder[4]+audio_name[page_idx];
					document.getElementById("audio-1").src = audio_1;
					document.getElementById("audio-2").src = audio_2;
					document.getElementById("audio-3").src = audio_3;			
					document.getElementById("audio-4").src = audio_4;
					document.getElementById("audio-5").src = audio_5;
					if (page_idx==11){
					    document.getElementById("send").value = "最後一組，確認送出";
					}
					storeContent();
					document.getElementById("store_content1").innerHTML = answer_str;
				}else{
					alert('跳轉儲存, page_idx = '+page_idx);
					document.getElementById("send").value = "下一組";
				    page_idx = 0;
				}
			
			}
			</script>
</html>
